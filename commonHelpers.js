import{a as L,S as w,i as x}from"./assets/vendor-ee72e1a4.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(r){if(r.ep)return;r.ep=!0;const t=i(r);fetch(r.href,t)}})();const I="/goit-js-hw-12/assets/bi_x-octagon-4f06a8ee.svg",g="/goit-js-hw-12/assets/closebi_x-lg-de5d3efc.svg";async function h(e,o=1,i=15){const s="45065033-34b48c3d2ea0e7ba665d8e642",r="https://pixabay.com/api/",t={key:s,q:e,image_type:"photo",orientation:"horizontal",safesearch:"true",page:o,per_page:i};try{return(await L.get(r,{params:t})).data.hits}catch(c){return S(c),[]}}function S(e){if(e.response)switch(e.response.status){case 404:console.error("Images not found"),alert("Images not found");break;case 500:console.error("Server error"),alert("Server error");break;default:console.error(`Error: ${e.response.status}`),alert(`Error: ${e.response.status}`)}else e.request?(console.error("Check your internet connection:"),alert("Internet connection lost !")):(console.error("Error setting",e.message),alert("Error setting"))}function y(e){const o=document.getElementById("image-container");if(Array.from(o.querySelectorAll(".gallery-link")),e.length>0){const s=e.map(t=>`
      <li class="gallery-link">
        <a class="card-link" href="${t.largeImageURL}" data-lightbox="gallery" data-title="${t.tags}">
          <div class="card">
          <div id="loader" class="loader" aria-live="polite" role="status"></div>
            <img class="image" src="${t.webformatURL}" alt="${t.tags}">
            <div class="card-points">
              <div class="card-text"><p>Likes: ${t.likes}</p></div>
              <div class="card-text"><p>Views: ${t.views}</p></div>
              <div class="card-text"><p>Comments: ${t.comments}</p></div>
              <div class="card-text"><p>Downloads: ${t.downloads}</p></div>
            </div>
          </div>
        </a>
      </li>
    `).join("");o.innerHTML+=s,new w('[data-lightbox="gallery"]').refresh()}document.querySelectorAll(".image").forEach(s=>{s.onload=()=>{s.previousElementSibling.style.display="none"}})}const v=document.querySelector("#search-form");document.getElementById("loader");const n=document.getElementById("loadButton"),k=document.querySelector(".submit"),q=document.getElementById("image-container"),l=document.getElementById("search-input");let d="",a=1;const E=15;function f(e,o,i=3e3){x.show({position:"topRight",message:e,backgroundColor:"#EF4040",messageColor:"#fff",messageSize:"16",maxWidth:432,iconUrl:I,timeout:i,class:"iziToast-custom",onOpening:function(s,r){const t=document.createElement("div");t.className="custom-icon",t.style.backgroundImage=`url(${o})`,r.querySelector(".iziToast-message").appendChild(t)}})}async function b(e){if(e.preventDefault(),d=document.querySelector("#search-input").value.trim(),d){a===1&&(k.removeEventListener("click",b),n.removeEventListener("click",u),m());try{const o=await h(d,a,E);o.length>0?(y(o),n.addEventListener("click",u),n.style.display="block"):a===1&&p()}catch(o){console.error("Error searching images:",o),f(o.message,g,3e3),a===1&&m()}}else a===1&&p();v.reset()}function p(){f("Sorry, there are no images matching your search query. Please try again!",g,3e3),m()}function m(){q.innerHTML=""}async function u(){try{const e=await h(d,a,E);e.length>0?(y(e),setTimeout($,500),a++,n.addEventListener("click",u),n.style.display="block"):(n.removeEventListener("click",u),n.style.display="none",f("We're sorry, but you've reached the end of search results.",g,3e3))}catch(e){console.error("Error fetching images:",e),n.textContent="Failed to load more"}}v.addEventListener("submit",b);function C(){const e=document.querySelector(".card");return e?e.getBoundingClientRect().height:0}function $(){const e=C();e>0&&window.scrollBy({top:2*e,behavior:"smooth"})}l.addEventListener("blur",()=>{l.value.length===0||!l.value?l.style.border="4px solid red":l.style.border="4px solid green"});
//# sourceMappingURL=commonHelpers.js.map
