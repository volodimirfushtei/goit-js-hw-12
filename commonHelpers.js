import{a as x,S as I,i as S}from"./assets/vendor-ee72e1a4.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(o){if(o.ep)return;o.ep=!0;const t=i(o);fetch(o.href,t)}})();const k="/goit-js-hw-12/assets/bi_x-octagon-4f06a8ee.svg",d="/goit-js-hw-12/assets/closebi_x-lg-de5d3efc.svg";async function p(e,r=1,i=15){const s="45065033-34b48c3d2ea0e7ba665d8e642",o="https://pixabay.com/api/",t={key:s,q:e,image_type:"photo",orientation:"horizontal",safesearch:"true",page:r,per_page:i};try{const c=await x.get(o,{params:t}),{hits:L,totalHits:w}=c.data;return{hits:L,totalHits:w}}catch(c){return q(c),{hits:[],totalHits:0}}}function q(e){if(e.response)switch(e.response.status){case 404:console.error("Images not found"),alert("Images not found");break;case 500:console.error("Server error"),alert("Server error");break;default:console.error(`Error: ${e.response.status}`),alert(`Error: ${e.response.status}`)}else e.request?(console.error("Check your internet connection:"),alert("Internet connection lost !")):(console.error("Error setting",e.message),alert("Error setting"))}function v(e){const r=document.getElementById("image-container");if(Array.from(r.querySelectorAll(".gallery-link")),e.length>0){const s=e.map(t=>`
      <li class="gallery-link">
        <a class="card-link" href="${t.largeImageURL}" data-lightbox="gallery" data-title="${t.tags}">
          <div class="card">
          <div id="loader" class="loader" aria-live="polite" role="status"></div>
            <img class="image" src="${t.webformatURL}" alt="${t.tags}">
            <div class="card-points">
              <div class="card-text"><p>Likes: ${t.likes}</p></div>
              <div class="card-text"><p>Views: ${t.views}</p></div>
              <div class="card-text"><p>Comments: ${t.comments}</p></div>
              <div class="card-text"><p>Downloads: ${t.downloads}</p></div>
            </div>
          </div>
        </a>
      </li>
    `).join("");r.innerHTML+=s,new I('[data-lightbox="gallery"]').refresh()}document.querySelectorAll(".image").forEach(s=>{s.onload=()=>{s.previousElementSibling.style.display="none"}})}const b=document.querySelector("#search-form");document.getElementById("loader");const n=document.getElementById("loadButton"),C=document.querySelector(".submit"),$=document.getElementById("image-container"),l=document.getElementById("search-input");let m="",a=1;const f=15;function u(e,r,i=3e3){S.show({position:"topRight",message:e,backgroundColor:"#EF4040",messageColor:"#fff",messageSize:"16",maxWidth:432,iconUrl:k,timeout:i,class:"iziToast-custom",onOpening:function(s,o){const t=document.createElement("div");t.className="custom-icon",t.style.backgroundImage=`url(${r})`,o.querySelector(".iziToast-message").appendChild(t)}})}async function E(e){if(e.preventDefault(),m=document.querySelector("#search-input").value.trim(),a=1,m){a===1&&(C.removeEventListener("click",E),n.removeEventListener("click",g),h());try{const{hits:r,totalHits:i}=await p(m,a,f);r.length>0?(v(r),n.style.display="block",n.addEventListener("click",g),r.length>=i&&(n.style.display="none",u("We're sorry, but you've reached the end of search results.",d,3e3))):a===1&&y()}catch(r){console.error("Error searching images:",r),u(r.message,d,3e3),a===1&&h()}}else a===1&&y();b.reset()}function y(){u("Sorry, there are no images matching your search query. Please try again!",d,3e3),h()}function h(){$.innerHTML=""}async function g(){try{const{hits:e,totalHits:r}=await p(m,a,f);e.length>0?(v(e),setTimeout(P,500),a++,n.addEventListener("click",g),n.style.display="block",a*f>=r&&(n.style.display="none",n.removeEventListener("click",g),u("We're sorry, but you've reached the end of search results.",d,3e3))):(n.style.display="none",u("We're sorry, but you've reached the end of search results.",d,3e3))}catch(e){console.error("Error fetching images:",e),n.textContent="Failed to load more"}}b.addEventListener("submit",E);function B(){const e=document.querySelector(".card");return e?e.getBoundingClientRect().height:0}function P(){const e=B();e>0&&window.scrollBy({top:2*e,behavior:"smooth"})}l.addEventListener("blur",()=>{l.value.length===0||!l.value?l.style.border="4px solid red":l.style.border="4px solid green"});
//# sourceMappingURL=commonHelpers.js.map
