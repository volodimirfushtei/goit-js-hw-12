{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/img/closebi_x-lg.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","export default \"__VITE_ASSET__fa57d3b7__\"","import axios from 'axios';\n\nexport async function fetchImages(query, currentPage = 1, perPage = 15) {\n  const API_KEY = '45065033-34b48c3d2ea0e7ba665d8e642';\n  const url = 'https://pixabay.com/api/';\n\n  const params = {\n    key: API_KEY,\n    q: encodeURIComponent(query),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(url, { params });\n    return response.data.hits; // Повертаємо тільки зображення (hits)\n  } catch (error) {\n    if (error.response) {\n      // Запит був зроблений, і сервер відповів кодом статусу, що виходить за межі діапазону 2xx\n      switch (error.response.status) {\n        case 404:\n          console.error('Images not found.');\n          break;\n        case 500:\n          console.error('Server error. Please try again later.');\n          break;\n        default:\n          console.error(`Unexpected error: ${error.response.status}`);\n      }\n    } else if (error.request) {\n      // Запит був зроблений, але відповіді не отримано\n      console.error('No response received from the server.');\n    } else {\n      // Щось сталося при налаштуванні запиту\n      console.error('Error setting up the request:', error.message);\n    }\n    return []; // Повертаємо порожній масив у разі помилки\n  }\n}\n","'use strict';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(images) {\n  const imageContainer = document.getElementById('image-container');\n\n  imageContainer.innerHTML = '';\n\n  if (images.length > 0) {\n    const imageCards = images.map(\n      image => `\n      <li class=\"gallery-link\">\n        <a class=\"card-link\" href=\"${image.largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${image.tags}\">\n          <div class=\"card\">\n            <img class=\"image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"card-points\">\n              <div class=\"card-text\"><p>Likes: ${image.likes}</p></div>\n              <div class=\"card-text\"><p>Views: ${image.views}</p></div>\n              <div class=\"card-text\"><p>Comments: ${image.comments}</p></div>\n              <div class=\"card-text\"><p>Downloads: ${image.downloads}</p></div>\n            </div>\n          </div>\n        </a>\n      </li>\n    `\n    );\n    imageContainer.innerHTML = imageCards.join('');\n    const lightbox = new SimpleLightbox('[data-lightbox=\"gallery\"]');\n    lightbox.refresh();\n  } else {\n    imageContainer.innerHTML = ''; // Повідомлення, якщо немає зображень\n  }\n}\n","'use strict';\nimport iconErr2 from './img/bi_x-octagon.svg';\nimport iconErr1 from './img/closebi_x-lg.svg';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst formElement = document.querySelector('#search-form');\nconst loader = document.getElementById('loader');\nconst loadButton = document.getElementById('loadButton');\nconst imageContainer = document.getElementById('image-container');\n\nlet query = '';\nlet currentPage = 1;\nconst perPage = 15; // Кількість зображень на сторінку\n\nfunction showToastWithIconAtEnd(message, iconUrl, timeout = 3000) {\n  iziToast.show({\n    position: 'topRight',\n    message: message,\n    backgroundColor: '#EF4040',\n    messageColor: '#fff',\n    messageSize: '16',\n    maxWidth: 432,\n    iconUrl: iconErr2,\n    timeout: timeout,\n    class: 'iziToast-custom',\n    onOpening: function (instance, toast) {\n      const iconElement = document.createElement('div');\n      iconElement.className = 'custom-icon';\n      iconElement.style.backgroundImage = `url(${iconUrl})`;\n      toast.querySelector('.iziToast-message').appendChild(iconElement);\n    },\n  });\n}\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  query = document.querySelector('#search-input').value.trim();\n\n  if (query) {\n    currentPage = 1; // Скидаємо сторінку при новому запиті\n    clearGallery();\n    showLoader();\n    try {\n      const data = await fetchImages(query, currentPage, perPage);\n      hideLoader();\n      if (data.hits && data.hits.length > 0) {\n        renderImages(data.hits);\n        loadButton.style.display = 'block'; // Показати кнопку завантаження\n      } else {\n        NoImagesFound();\n      }\n    } catch (error) {\n      hideLoader();\n      console.error('Error searching images:', error);\n      showToastWithIconAtEnd(error.message, iconErr1, 3000);\n      clearGallery();\n    }\n  } else {\n    NoImagesFound();\n  }\n\n  formElement.reset();\n}\n\nfunction NoImagesFound() {\n  showToastWithIconAtEnd(\n    'Sorry, there are no images matching your search query. Please try again!',\n    iconErr1,\n    3000\n  );\n  clearGallery();\n}\n\nfunction clearGallery() {\n  imageContainer.innerHTML = '';\n}\n\nfunction showLoader() {\n  if (loader) {\n    loader.classList.add('visible');\n  } else {\n    console.error('Loader not found');\n  }\n}\n\nfunction hideLoader() {\n  if (loader) {\n    loader.classList.remove('visible');\n  } else {\n    console.error('Loader not found');\n  }\n}\n\nasync function loadImages() {\n  showLoader();\n  try {\n    const data = await fetchImages(query, currentPage, perPage);\n    if (data.hits && data.hits.length > 0) {\n      renderImages(data.hits);\n      currentPage++;\n      loadButton.style.display = 'block'; // Показати кнопку завантаження\n    } else {\n      loadButton.style.display = 'none'; // Приховати кнопку, якщо більше немає зображень\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    loadButton.textContent = 'Failed to load more';\n  }\n  hideLoader();\n}\n\nformElement.addEventListener('submit', handleSearch);\nloadButton.addEventListener('click', loadImages);\n"],"names":["iconErr2","iconErr1","fetchImages","query","currentPage","perPage","API_KEY","url","params","axios","error","renderImages","images","imageContainer","imageCards","image","SimpleLightbox","formElement","loader","loadButton","showToastWithIconAtEnd","message","iconUrl","timeout","iziToast","instance","toast","iconElement","handleSearch","event","clearGallery","showLoader","data","hideLoader","NoImagesFound","loadImages"],"mappings":"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"}